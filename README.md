# Домашнее задание к занятию 6.1. Типы и структура СУБД

## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

    Электронные чеки в json виде
        Документная база данных документоориентированные базы хранят данные в структурированных форматах – JSON, BSON или XML.   
        Этот тип БД не предписывает опредёленный формат или схему, каждый документ может иметь свою внутреннюю структуру,  
        в любой момент можно менять свойства данных, не изменяя структуру или сами данные.

    Склады и автомобильные дороги для логистической компании  
        Сетевые базы данных - записи могут иметь более одного родителя следовательно, можно моделировать сложные отношения.  

    Генеалогические деревья  
        Иерархические базы данных В иерархических базах данных каждая запись имеет одного «родителя». 
        Это создаёт древовидную структуру, в которой записи классифицируются по их отношениям с цепочкой родительских записей.

    Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации  
        Базы данных «ключ-значение» хранилища обеспечивают быстрый и малозатратный доступ, нет жёсткой схемы отношения между данными,  
        поэтому в таких БД часто хранят одновременно различные типы данных 

    Отношения клиент-покупка для интернет-магазина  
		Реляционная БД - отношение многих ко многим. Каждая строка представляет отдельную запись или элемент данных в таблице, который содержит значения для каждого из столбцов. Поле в таблице, называемое внешним ключом, может содержать ссылки на столбцы в других таблицах, что позволяет их соединять.
		
Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

## Задача 2

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если (каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

    Данные записываются на все узлы с задержкой до часа (асинхронная запись)  
		CA, EL-PC
	
    При сетевых сбоях, система может разделиться на 2 раздельных кластера 
		AP, PA-EL
	
    Система может не прислать корректный ответ или сбросить соединение  
		CP, PA-EC
	

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?

## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?  

	Гарантии ACID обеспечива­ют безопасную среду для обработки данных:

		атомарность (Atomic) - все операции в транзакции либо успеш­ны, либо для всех них выполняется откат;  
		согласованность (Consistent) - по окончании транзакции база данных является структурно согласованной;  
		изолированность (Isolated) - транзакции не мешают друг другу. Спорные ситуации разрешаются базой данных так, что транзакции выполняются последовательно;  
		долговечность (Durable) - результаты применения транзакции не должны теряться, даже при сбоях.  
		
	 Т.е. по завершении транзакции ее данные согласуются и записываются в память, но это требует сложных блокировок, которые могут вызвать логическую недоступность.
	 
	Подход BASE:

    обычно доступно (Basicavailability) - хранилище доступно большую часть времени;  
    гибкое состояние (Soft-state) - хранилища не обязаны соблюдать очередность записей, и разные реплики не должны постоянно согласовываться;  
    отложенная согласованность (Eventualconsistency) - хранилища достигают согласованности с некоторой задержкой по времени (например, позже, во время чтения).  
	
	 Т.е. BASE дает мееньше гарантий чем ACID, и между их пригципами нет прямого соответствия. Значения в BASE-хранилище доступны (потому что это является основой масштабирования), но это не являются гарантированно согласованными на репликах при записи. BASE-хранилища обеспечивают менее строгий контроль: данные будут согласованы позднее, вероятнее всего, во время чтения, или всегда будут согласованы, но только для определенных фиксаций, обработанных последними.
	 
	 Исходя из этого можно сделать вывод , что принципы BASE и ACID являются не совместимыми и не могут соцетаться в одной системе.  


## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

    фиксация некоторых значений с временем жизни
    реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм Pub/Sub. Что это за система? Какие минусы выбора данной системы?  
	
	Redis это размещаемое в памяти хранилище ключ-значение, обычно используемое для кэшей и подобных механизмов ускорения сетевых приложений.
		
	Redis обычно применяют:

		для хранения пользовательских сессий (HTML-фрагменты веб-страниц или товары корзины интернет-магазина);  
		для хранения промежуточных данных (поток сообщений на стене, голосовалки, таблицы результатов);  
		как брокер сообщений (стратегия «издатель-подписчик» позволяет создавать новостные ленты, групповые чаты);  
		как СУБД для небольших приложений, блогов;  
		для кэширования данных из основного хранилища, что значительно снижает нагрузку на реляционную базу данных;  
		для хранения «быстрых» данных — когда важны скорость и критичны задержки передачи (аналитика и анализ данных, финансовые и торговые сервисы).   
			
	Минусы Redis:
		Высокие требования к оперативной памяти сервера;  
		Консистентность данных - в случае отказа сервера, данные из оперативной памяти будут утеряны и сохранятся только данные с последней синхронизации с диском;  
		Отсутствует разграничение прав доступа по пользователям;  
		Отсутствует поддержка языка SQL проблема оперативного поиска данных;  
		Экземпляр БД не маштабируется;  
		Работает только на одном ядре процессора в однопоточном режиме;  